{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["config:recommended"],

  // We want to use Renovate as a signal that things need updating.
  // Unfortunately, setting this to 0 means "no rate limiting".
  prConcurrentLimit: 1,
  prCreation: "not-pending",

  // This is probably the best we can do for now!
  dependencyDashboardHeader: "This issue lists Renovate updates to detected dependencies. Use these as a signal to perform a manual update; especially in the cases where Renovate fails.",
  prHeader: "This PR is meant as a signal to perform a manual update on dependencies; especially in the case where Renovate fails.",

  // Only create PRs for minor and major updates; ignore patches
  bumpVersion: "minor",

  reviewers: [
    "team:topiary-core-team"
  ],

  ignorePaths: [
    ".github/workflows/release.yml",  // Automatically generated by dist
    "web-playground/package.json",    // Not currently maintained (see `playground` branch)
  ],

  // Enable Nix support (experimental)
  nix: { enabled: true },

  // For Nix flake.lock and Cargo.lock
  lockFileMaintenance: { enabled: true },

  packageRules: [
    {
      // Tree-sitter and its sub-packages should be updated together
      groupName: "Tree-sitter packages",
      matchPackageNames: ["tree-sitter", "tree-sitter-*"],
      matchManagers: ["cargo"]
    },
    {
      groupName: "Clap packages",
      matchPackageNames: ["clap", "clap_derive"],
      matchManagers: ["cargo"]
    },
    {
      groupName: "serde packages",
      matchPackageNames: ["serde", "serde_*"],
      matchManagers: ["cargo"]
    },
    {
      // Disable automatic WASM toolchain updates
      groupName: "WASM toolchain",
      matchPackageNames: ["wasm-bindgen*"],
      matchManagers: ["cargo"],
      enabled: false
    },
  ]
}
